{% extends "base.html" %}
{% block title %}Stored Reviews{% endblock %}
{% block content %}
<div class="page-bg" style="background-image: url('{{ url_for('static', filename='images/bg_stored.jpg') }}')">
  <div class="overlay p-4 col-lg-10 mx-auto text-white">
    <h2 class="mb-3">Stored Reviews</h2>

    {% if stored_reviews and stored_reviews|length > 0 %}
      <div class="table-responsive">
        <table class="table table-dark table-striped align-middle">
          <thead>
            <tr>
              <th>ID</th>
              <th>Review</th>
              <th>Sentiment Score</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody>
            {% for r in stored_reviews %}
              <tr>
                <td>{{ r.id }}</td>
                <td style="max-width:600px; white-space: normal;">{{ r.content }}</td>
                <td>{{ '%.3f'|format(r.sentiment_score) if r.sentiment_score is not none else 'N/A' }}</td>
                <td>{{ r.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-info">No reviews yet. Submit one on the <a href="{{ url_for('give_review') }}">Give Review</a> page.</div>
    {% endif %}

    <a class="btn btn-outline-light mt-3" href="{{ url_for('charts') }}">View Charts</a>
  </div>
</div>
{% endblock %}
